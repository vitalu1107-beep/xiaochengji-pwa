<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#46B256" />
  <title>å°æˆå°± Â· Small Wins</title>

  <!-- PWA -->
  <link rel="manifest" href="./manifest.json" />
  <link rel="apple-touch-icon" href="./icons/icon-192.png" />
  <link rel="icon" href="./icons/icon-192.png" />

  <!-- Styles -->
  <link rel="stylesheet" href="./style.css" />

  <!-- âœ… å…³é”®ï¼šç»™â€œç§»åŠ¨ç«¯å¸ƒå±€â€åŠ ä¸€å±‚è½»é‡å…œåº•ï¼ˆä¸æ”¹ä½ ç°æœ‰ style.css ä¹Ÿèƒ½ç¨³ä½ï¼‰ -->
  <style>
    /* --- layout base --- */
    :root { --container-max: 980px; }
    body { margin: 0; }
    .app { width: 100%; }
    .container { max-width: var(--container-max); margin: 0 auto; padding: 16px; }

    /* --- header --- */
    .brand { display: flex; align-items: center; justify-content: center; gap: 12px; margin-top: 8px; }
    .brand .logo { width: 44px; height: 44px; border-radius: 14px; object-fit: cover; }
    .brand .titles { line-height: 1.2; }
    .brand h1 { font-size: 22px; margin: 0; }
    .brand p { margin: 4px 0 0; opacity: .75; }

    /* --- top nav (æ¨ªæ’ + è‡ªåŠ¨æ¢è¡Œï¼Œä¸å…è®¸å˜ç«–åˆ—) --- */
    .topnav {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;          /* âœ… å°å±ä¸å¤Ÿå°±æ¢è¡Œï¼Œä½†ä»æ˜¯â€œæ¨ªå‘æ’åˆ—â€ */
      gap: 10px;
      margin: 14px 0 18px;
    }
    .topnav button {
      appearance: none;
      border: 1px solid rgba(0,0,0,.08);
      background: rgba(255,255,255,.7);
      border-radius: 999px;
      padding: 10px 14px;
      font-size: 15px;
      cursor: pointer;
      white-space: nowrap;      /* âœ… æ–‡å­—ä¸æ‹†è¡Œï¼Œä¿è¯æ˜¯èƒ¶å›ŠæŒ‰é’® */
    }
    .topnav button.active {
      background: #46B256;
      color: #fff;
      border-color: transparent;
    }

    /* --- cards / panels base --- */
    .panel { border-radius: 18px; padding: 16px; background: rgba(255,255,255,.72); border: 1px solid rgba(0,0,0,.06); }
    .panel + .panel { margin-top: 14px; }
    .section-title { display: flex; align-items: center; gap: 8px; margin: 0 0 10px; font-size: 18px; }
    .muted { opacity: .7; }

    /* --- homepage: æˆå°±è®°å½• + å°ç¡®å¹¸å¢™ æ¨ªæ’ï¼ˆç§»åŠ¨ç«¯ä¹Ÿå°½é‡ä¸¤åˆ—ï¼‰ --- */
    .stats-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;  /* âœ… é»˜è®¤ä¸¤åˆ— */
      gap: 12px;
      margin-top: 14px;
    }
    @media (max-width: 360px) {
      .stats-grid { grid-template-columns: 1fr; } /* è¶…å°å±æ‰å˜ä¸€åˆ— */
    }
    .stat-card { border-radius: 18px; padding: 16px; background: rgba(255,255,255,.72); border: 1px solid rgba(0,0,0,.06); }
    .stat-card h3 { margin: 0 0 10px; font-size: 16px; display: flex; align-items: center; gap: 8px; }
    .stat-card .big { font-size: 40px; font-weight: 800; line-height: 1; margin: 6px 0; }
    .stat-card .sub { margin: 0 0 12px; }
    .stat-card .btn { width: 100%; padding: 12px 14px; border-radius: 14px; border: 1px solid rgba(0,0,0,.08); background: rgba(255,255,255,.75); cursor: pointer; }

    /* --- record page: è¾“å…¥ + é€‰æ‹©å¿ƒæƒ…(æ¨ªæ’/ç½‘æ ¼) + ä¿å­˜æŒ‰é’®åœ¨ä¸‹é¢ --- */
    .record-wrap { display: grid; gap: 12px; }
    .record-input { width: 100%; min-height: 52px; padding: 14px 14px; border-radius: 16px; border: 1px solid rgba(0,0,0,.10); background: rgba(255,255,255,.78); font-size: 16px; box-sizing: border-box; }

    .mood-title { margin: 6px 0 2px; font-size: 16px; font-weight: 700; }
    .mood-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr); /* âœ… æ‰‹æœºä¹Ÿæ¨ªå‘ä¸€æ’å››ä¸ª */
      gap: 10px;
      margin-top: 8px;
    }
    @media (max-width: 420px) {
      .mood-grid { grid-template-columns: repeat(2, 1fr); } /* å°å±æ”¹2åˆ—æ›´èˆ’æœ */
    }
    .mood-btn {
      width: 100%;
      padding: 12px 10px;
      border-radius: 16px;
      border: 1px solid rgba(0,0,0,.08);
      background: rgba(255,255,255,.75);
      cursor: pointer;
      font-size: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      white-space: nowrap;
    }
    .mood-btn.active { outline: 2px solid rgba(70,178,86,.35); border-color: rgba(70,178,86,.35); }

    .primary-btn {
      width: 100%;
      padding: 16px 14px;
      border-radius: 18px;
      border: none;
      background: #46B256;
      color: #fff;
      font-size: 20px;
      font-weight: 800;
      cursor: pointer;
    }

    /* --- list items (é€šç”¨å ä½ï¼šä½  style.css å·²ç»æœ‰ item ç³»åˆ—ä¹Ÿæ²¡å…³ç³») --- */
    .list { margin-top: 10px; }
    .item {
      display: flex; justify-content: space-between; gap: 10px;
      padding: 12px; border-radius: 14px;
      background: rgba(255,255,255,.75); border: 1px solid rgba(0,0,0,.06);
    }
    .item + .item { margin-top: 10px; }
    .item-left { display: flex; align-items: center; gap: 10px; min-width: 0; flex: 1; }
    .item-text { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    .item-right { display: flex; flex-direction: column; align-items: flex-end; gap: 8px; }

    /* --- settings form tidy --- */
    .form-row { display: grid; grid-template-columns: 1fr auto; gap: 10px; align-items: center; }
    .input { width: 100%; padding: 12px 12px; border-radius: 14px; border: 1px solid rgba(0,0,0,.10); background: rgba(255,255,255,.80); font-size: 16px; }
    .small { font-size: 13px; }
    .btn { padding: 12px 14px; border-radius: 14px; border: 1px solid rgba(0,0,0,.10); background: rgba(255,255,255,.80); cursor: pointer; }
    .btn.danger { background: #e85b5b; border-color: transparent; color: #fff; }
  </style>
</head>

<body>
  <div class="app">
    <div class="container">
      <!-- é¡¶éƒ¨å“ç‰Œ -->
      <header>
        <div class="brand">
          <img class="logo" src="./icons/icon-192.png" alt="logo" />
          <div class="titles">
            <h1>å°æˆå°± <span class="muted" style="font-size:14px;font-weight:600;margin-left:6px;">Small Wins</span></h1>
            <p class="muted">è®°å½•æ¯å¤©çš„å°å°è¿›æ­¥ã€‚</p>
          </div>
        </div>

        <!-- é¡¶éƒ¨å¯¼èˆªï¼ˆæ¨ªæ’ï¼‰ -->
        <nav class="topnav" aria-label="ä¸»å¯¼èˆª">
          <button id="tab-home" class="active" type="button" data-target="page-home">é¦–é¡µ</button>
          <button id="tab-today" type="button" data-target="page-today">è®°å½•å¾®å…‰</button>
          <button id="tab-wall" type="button" data-target="page-wall">æˆå°±å¢™</button>
          <button id="tab-random" type="button" data-target="page-random">éšæœºå›é¡¾</button>
          <button id="tab-settings" type="button" data-target="page-settings">è®¾ç½®</button>
        </nav>
      </header>

      <!-- ========== é¡µé¢ï¼šé¦–é¡µ ========== -->
      <main id="page-home">
        <!-- é—®å€™ -->
        <section class="panel">
          <div class="muted" id="home-date">â€”</div>
          <div style="font-size:20px;font-weight:800;margin-top:6px;" id="home-greeting">æ™šä¸Šå¥½ï¼Œå¤å¤®</div>
        </section>

        <!-- ä»Šæ—¥èƒ½é‡ -->
        <section class="panel">
          <div class="muted small" style="margin-bottom:8px;">ä»Šæ—¥èƒ½é‡</div>
          <div id="home-quote" style="font-size:22px;font-weight:900;line-height:1.35;">
            â€œä½ ä¸éœ€è¦å¾ˆå‰å®³æ‰å¼€å§‹ï¼Œä½ éœ€è¦å¼€å§‹æ‰ä¼šå˜å‰å®³ã€‚â€
          </div>
        </section>

        <!-- ä¸¤å¼ å¡ï¼šæ¨ªæ’ -->
        <section class="stats-grid" aria-label="ç»Ÿè®¡å¡ç‰‡">
          <div class="stat-card" id="card-achievement">
            <h3>ğŸ† æˆå°±è®°å½•</h3>
            <div class="big" id="stat-streak">0</div>
            <p class="sub muted" id="stat-streak-sub">å·²åšæŒ 0 å¤©</p>
            <button class="btn" type="button" data-target="page-wall">å»è®°å½•</button>
          </div>

          <div class="stat-card" id="card-happy">
            <h3>ğŸ’— å°ç¡®å¹¸å¢™</h3>
            <div class="big" id="stat-happy">0</div>
            <p class="sub muted" id="stat-happy-sub">0 ä¸ªç¬é—´</p>
            <button class="btn" type="button" data-target="page-wall">å»çœ‹çœ‹</button>
          </div>
        </section>

        <!-- æœ€è¿‘çš„å°å¿«ä¹ -->
        <section class="panel">
          <h2 class="section-title">æœ€è¿‘çš„å°å¿«ä¹</h2>
          <div id="recent-list" class="list">
            <div class="muted" id="recent-empty">è¿˜æ²¡æœ‰è®°å½•ï½å…ˆå†™ä¸‹ç¬¬ä¸€ä»¶å°å°è¿›æ­¥å§ âœ¨</div>
          </div>
        </section>
      </main>

      <!-- ========== é¡µé¢ï¼šè®°å½•å¾®å…‰ ========== -->
      <main id="page-today" style="display:none;">
        <section class="panel">
          <h2 class="section-title">âœ¨ è®°å½•å¾®å…‰</h2>

          <div class="record-wrap">
            <!-- è¾“å…¥ -->
            <input
              id="input-text"
              class="record-input"
              type="text"
              placeholder="æ¯”å¦‚ï¼šä»Šå¤©æˆ‘å®Œæˆäº†ä¸€ä¸ªå°ç›®æ ‡ / æˆ‘æŠŠä¸€ä»¶äº‹æ¨è¿›äº†ä¸€æ­¥"
              autocomplete="off"
            />

            <!-- é€‰æ‹©å¿ƒæƒ… -->
            <div class="mood-title" id="mood-title">é€‰æ‹©å¿ƒæƒ…</div>

            <div class="mood-grid" id="mood-group" role="group" aria-label="é€‰æ‹©å¿ƒæƒ…">
              <button class="mood-btn" type="button" data-mood="calm">ğŸŒ™ å¹³é™</button>
              <button class="mood-btn" type="button" data-mood="happy">âœ¨ æ„‰æ‚¦</button>
              <button class="mood-btn" type="button" data-mood="relaxed">ğŸŒ± é‡Šç„¶</button>
              <button class="mood-btn" type="button" data-mood="lazy">â˜ï¸ æ…µæ‡’</button>
            </div>

            <!-- âœ… ä¿å­˜æŒ‰é’®æ”¾åœ¨å¿ƒæƒ…ä¸‹é¢ -->
            <button id="btn-save" class="primary-btn" type="button">å°å­˜è¿™ä¸€åˆ»</button>
          </div>
        </section>

        <!-- ä»Šæ—¥åˆ—è¡¨ -->
        <section class="panel">
          <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;">
            <h2 class="section-title" style="margin:0;">ğŸ“… ä»Šå¤©</h2>
            <button id="btn-clear-today" class="btn" type="button">æ¸…ç©ºä»Šå¤©</button>
          </div>

          <div id="today-list" class="list"></div>
          <div id="today-empty" class="muted" style="text-align:center;padding:18px 0;">ä»Šå¤©è¿˜æ²¡æœ‰è®°å½•ï½</div>
        </section>
      </main>

      <!-- ========== é¡µé¢ï¼šæˆå°±å¢™ï¼ˆå…¨è§ˆ+æœç´¢ï¼‰ ========== -->
      <main id="page-wall" style="display:none;">
        <section class="panel">
          <h2 class="section-title">ğŸ§± æˆå°±å¢™ï¼ˆå…¨è§ˆ + æœç´¢ï¼‰</h2>

          <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:10px;">
            <button class="btn" type="button" data-filter="è¿åŠ¨">#è¿åŠ¨</button>
            <button class="btn" type="button" data-filter="ç”Ÿæ´»">#ç”Ÿæ´»</button>
          </div>

          <input id="wall-search" class="input" type="text" placeholder="æœç´¢ï¼šæ¯”å¦‚ è¿åŠ¨ / é˜…è¯» / å¤ç›˜" />

          <div style="display:flex;justify-content:flex-end;margin-top:10px;">
            <button id="btn-wall-clear" class="btn" type="button">æ¸…ç©º</button>
          </div>
        </section>

        <section class="panel">
          <h2 class="section-title">ğŸ² éšæœºå›é¡¾</h2>
          <div id="random-box" class="item">
            <div class="item-left">
              <div class="item-text muted">ç‚¹å‡»â€œæ¥ä¸€æ¡â€ï¼Œçœ‹çœ‹è¿‡å»çš„ä½ ã€‚</div>
            </div>
            <div class="item-right" style="flex-direction:row;">
              <button id="btn-random" class="btn" type="button">æ¥ä¸€æ¡</button>
              <button id="btn-random-close" class="btn" type="button">å…³é—­</button>
            </div>
          </div>
        </section>

        <section class="panel">
          <h2 class="section-title">å…¨éƒ¨è®°å½•</h2>
          <div id="wall-list" class="list"></div>
          <div id="wall-empty" class="muted" style="text-align:center;padding:18px 0;">è¿˜æ²¡æœ‰è®°å½•ï½</div>
        </section>
      </main>

      <!-- ========== é¡µé¢ï¼šéšæœºå›é¡¾ ========== -->
      <main id="page-random" style="display:none;">
        <section class="panel">
          <h2 class="section-title">ğŸ² éšæœºå›é¡¾</h2>
          <div id="random-card" class="panel" style="background:rgba(255,255,255,.65);">
            <div class="muted" style="margin-bottom:8px;">ä½ æŠ½åˆ°çš„æ˜¯ï¼š</div>
            <div id="random-text" style="font-size:18px;font-weight:800;line-height:1.4;">â€”</div>
            <div id="random-time" class="muted small" style="margin-top:10px;">â€”</div>
            <div style="display:flex;gap:10px;margin-top:12px;flex-wrap:wrap;">
              <button id="btn-random-next" class="btn" type="button">å†æ¥ä¸€æ¡</button>
              <button id="btn-random-delete" class="btn danger" type="button">åˆ é™¤</button>
            </div>
          </div>
        </section>
      </main>

      <!-- ========== é¡µé¢ï¼šè®¾ç½® ========== -->
      <main id="page-settings" style="display:none;">
        <section class="panel">
          <h2 class="section-title">âš™ï¸ è®¾ç½®</h2>
          <p class="muted small" style="margin-top:0;">
            è¿™æ˜¯ä¸€ä¸ªç¦»çº¿å‹å¥½çš„ PWA åŸå‹ã€‚æ•°æ®ä¿å­˜åœ¨æœ¬åœ°æµè§ˆå™¨ï¼ˆlocalStorageï¼‰ï¼Œä¸ä¼šä¸Šä¼ æœåŠ¡å™¨ã€‚
          </p>

          <div style="margin-top:14px;">
            <button id="btn-install" class="btn" type="button">å®‰è£…åˆ°æ‰‹æœºï¼ˆæ·»åŠ åˆ°æ¡Œé¢ï¼‰</button>
            <div class="small muted" id="install-tip" style="margin-top:8px;">âœ… å¯å®‰è£…ï¼šç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å³å¯æ·»åŠ åˆ°æ¡Œé¢ã€‚</div>
          </div>

          <hr style="border:none;border-top:1px solid rgba(0,0,0,.06);margin:14px 0;" />

          <!-- æ˜µç§° -->
          <div style="margin-top:6px;">
            <div style="font-weight:800;margin-bottom:8px;">æ˜µç§°ï¼ˆç”¨äºé¦–é¡µé—®å€™è¯­ï¼‰</div>
            <div class="form-row">
              <input id="nickname-input" class="input" type="text" placeholder="æ¯”å¦‚ï¼šå¤å¤®" />
              <button id="btn-save-nickname" class="btn" type="button">ä¿å­˜æ˜µç§°</button>
            </div>
            <div class="muted small" style="margin-top:8px;">
              ä¿å­˜åé¦–é¡µä¼šæ˜¾ç¤ºï¼š<span id="nickname-preview">æ™šä¸Šå¥½ï¼Œå¤å¤®</span>
            </div>
          </div>

          <hr style="border:none;border-top:1px solid rgba(0,0,0,.06);margin:14px 0;" />

          <!-- å¯¼å‡º / æ¸…ç©º -->
          <div style="display:flex;gap:10px;flex-wrap:wrap;">
            <button id="btn-export" class="btn" type="button">å¯¼å‡ºä¸ºæ–‡æœ¬ï¼ˆå¤åˆ¶ï¼‰</button>
            <button id="btn-clear-all" class="btn danger" type="button">æ¸…ç©ºå…¨éƒ¨æ•°æ®</button>
          </div>
        </section>
      </main>

    </div>
  </div>

  <!-- Scripts -->
  <script src="./main.js"></script>

  <!-- âœ… å…œåº•å¯¼èˆªåˆ‡é¡µï¼ˆå¦‚æœä½ çš„ main.js å·²ç»å®ç°äº†ï¼Œä¹Ÿä¸ä¼šå†²çªï¼›ä¸éœ€è¦å¯åˆ ï¼‰ -->
  <script>
    (function () {
      const tabs = Array.from(document.querySelectorAll(".topnav button"));
      const pages = ["page-home","page-today","page-wall","page-random","page-settings"]
        .map(id => document.getElementById(id))
        .filter(Boolean);

      function show(id){
        pages.forEach(p => p.style.display = (p.id === id ? "" : "none"));
        tabs.forEach(t => t.classList.toggle("active", t.dataset.target === id));
      }

      tabs.forEach(btn => {
        btn.addEventListener("click", () => show(btn.dataset.target));
      });

      // è®©é¦–é¡µä¸¤ä¸ªæŒ‰é’®ä¹Ÿèƒ½åˆ‡é¡µ
      document.querySelectorAll('[data-target]').forEach(el => {
        if (el.closest(".topnav")) return;
        el.addEventListener("click", () => {
          const t = el.getAttribute("data-target");
          if (t) show(t);
        });
      });
    })();
  </script>

  <!-- Service Worker -->
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("./sw.js").catch(() => {});
      });
    }
  </script>
</body>
</html>
